<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MNET RPOP</title>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#0f0f0f;
    color:white;
}
header{
    background:#ff2a7f;
    padding:15px;
    text-align:center;
    font-size:24px;
    font-weight:bold;
}
section{
    padding:20px;
    border-bottom:1px solid #222;
}
input, textarea{
    width:100%;
    padding:8px;
    margin:5px 0;
    background:#1a1a1a;
    color:white;
    border:1px solid #333;
}
button{
    background:#ff2a7f;
    border:none;
    padding:8px 12px;
    color:white;
    cursor:pointer;
    margin:5px 0;
}
.card{
    background:#1a1a1a;
    padding:15px;
    margin:15px 0;
}
.like-btn{background:#28a745;}
.dislike-btn{background:#dc3545;}
img{max-width:100%;}
.comment{
    background:#111;
    padding:5px;
    margin:3px 0;
    font-size:14px;
}
</style>
</head>

<body>

<header>MNET RPOP</header>

<section id="loginSection">
<h2>Login</h2>
<input id="username" placeholder="Digite seu nome">
<button onclick="login()">Entrar</button>
</section>

<section id="registerSection" style="display:none;">
<h2>Cadastrar Grupo</h2>
<input id="company" placeholder="Nome da empresa">
<input id="groupName" placeholder="Nome do grupo/solista">
<input id="members" placeholder="Integrantes">
<input id="fandom" placeholder="Nome do fandom">
<input id="albumName" placeholder="Nome do √°lbum">
<input type="file" id="groupImage" accept="image/*">
<button onclick="registerGroup()">Cadastrar</button>
</section>

<section id="groupsSection" style="display:none;">
<h2>Grupos</h2>
<div id="groupsList"></div>
</section>

<section>
<h2>Top Chart</h2>
<div id="chart"></div>
</section>

<script>
let currentUser = localStorage.getItem("mnetUser");
let groups = JSON.parse(localStorage.getItem("mnetGroups")) || [];

if(currentUser){
    document.getElementById("loginSection").style.display="none";
    document.getElementById("registerSection").style.display="block";
    document.getElementById("groupsSection").style.display="block";
    renderGroups();
}

function login(){
    const name = document.getElementById("username").value;
    if(name){
        localStorage.setItem("mnetUser", name);
        location.reload();
    }
}

function registerGroup(){
    const company = document.getElementById("company").value;
    const groupName = document.getElementById("groupName").value;
    const members = document.getElementById("members").value;
    const fandom = document.getElementById("fandom").value;
    const albumName = document.getElementById("albumName").value;
    const file = document.getElementById("groupImage").files[0];

    const reader = new FileReader();
    reader.onload = function(e){
        const newGroup = {
            id: Date.now(),
            company,
            groupName,
            members,
            fandom,
            albumName,
            image:e.target.result,
            likes:0,
            dislikes:0,
            sales:0,
            comments:generateBotComments()
        };
        groups.push(newGroup);
        save();
        renderGroups();
    }
    if(file){
        reader.readAsDataURL(file);
    }
}

function generateBotComments(){
    const bots = [
        "MEU DEUS QUE TUDOOOO üò≠",
        "AMEI DEMAIS",
        "RPOP EST√Å CRESCENDO",
        "LINDASSSS",
        "EU VOU STAN",
        "PERFEI√á√ÉO",
        "IC√îNICAS",
        "QUE VOCAL",
        "CHOCADO",
        "SOCORRO"
    ];
    let arr=[];
    for(let i=0;i<30;i++){
        arr.push(bots[Math.floor(Math.random()*bots.length)]);
    }
    return arr;
}

function like(id){
    const group = groups.find(g=>g.id===id);
    group.likes++;
    group.sales += 10;
    save();
    renderGroups();
}

function dislike(id){
    const group = groups.find(g=>g.id===id);
    group.dislikes++;
    save();
    renderGroups();
}

function addComment(id){
    const input = document.getElementById("comment-"+id);
    const group = groups.find(g=>g.id===id);
    if(input.value){
        group.comments.push(input.value);
        input.value="";
        save();
        renderGroups();
    }
}

function save(){
    localStorage.setItem("mnetGroups", JSON.stringify(groups));
}

function renderGroups(){
    const container = document.getElementById("groupsList");
    container.innerHTML="";
    groups.forEach(g=>{
        container.innerHTML+=`
        <div class="card">
            <h3>${g.groupName}</h3>
            <img src="${g.image}">
            <p><b>Empresa:</b> ${g.company}</p>
            <p><b>Integrantes:</b> ${g.members}</p>
            <p><b>Fandom:</b> ${g.fandom}</p>
            <p><b>√Ålbum:</b> ${g.albumName}</p>
            <p>Likes: ${g.likes} | Dislikes: ${g.dislikes} | Vendas: ${g.sales}</p>
            <button class="like-btn" onclick="like(${g.id})">Like</button>
            <button class="dislike-btn" onclick="dislike(${g.id})">Dislike</button>
            <div>
                <input id="comment-${g.id}" placeholder="Comentar...">
                <button onclick="addComment(${g.id})">Enviar</button>
            </div>
            <div>
                ${g.comments.map(c=>`<div class="comment">${c}</div>`).join("")}
            </div>
        </div>
        `;
    });

    renderChart();
}

function renderChart(){
    const sorted = [...groups].sort((a,b)=> (b.likes + b.sales) - (a.likes + a.sales));
    const chart = document.getElementById("chart");
    chart.innerHTML="";
    sorted.slice(0,10).forEach((g,i)=>{
        chart.innerHTML+=`<p>${i+1}. ${g.groupName} (${g.likes + g.sales} pts)</p>`;
    });
}
</script>

</body>
</html>
